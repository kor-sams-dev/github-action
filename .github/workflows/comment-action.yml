name: Pull request comment

on:
  issue_comment:
    types: [created]

jobs:
  ready_to_qa:
    if: contains(github.event.comment.html_url, '/pull/') && github.event.comment.body == '/qa'
    runs-on: ubuntu-latest
    steps:
      - name: Checkout twip-next-fe repository
        uses: actions/checkout@v3
        with:
          repository: kor-sams-dev/github-action

      - name: Merge staging branch
        run: |
          echo ${{ github.event.action }}
          echo ${{ github.event.issue.pull_request.diff_url }}
          echo ${{ github.event.issue.pull_request.html_url }}
          echo ${{ github.event.issue.pull_request.merged_at }}
          echo ${{ github.event.issue.pull_request.patch_url }}
          echo ${{ github.event.issue.pull_request.url }}
          git config user.name "github action"
          git config user.email "tom@github.com"
          git checkout -b staging
          git merge ${{ github.event.comment}}} 
          git push
